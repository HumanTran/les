<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light only">
    <title>Gift for you</title>
    <link rel="stylesheet" href="style.css">
    <meta name="theme-color" content="#ffe5ec">
</head>
<body>
    <div class="container">
        <div class="envelope">
            <div class="love-text">love</div>
            <div class="star-decor star1"></div>
            <div class="star-decor star2"></div>
            <div class="star-decor star3"></div>
            <div class="star-decor star4"></div>
            <div class="star-decor star5"></div>
            <div class="star-decor star6"></div>
            <div class="star-decor star7"></div>
            <div class="star-decor star8"></div>
            <div class="star-decor star9"></div>
            <div class="star-decor star10"></div>
            <div class="star-decor star11"></div>
            <div class="star-decor star12"></div>
            <div class="star-decor star13"></div>
            <div class="star-decor star14"></div>
            <div class="star-decor star15"></div>
            <div class="envelope-flap"></div>
            <div class="letter-content">
                <button class="close-btn">‚úï</button>
                <img src="1.jpg" alt="Letter" class="letter-image" id="letterImage">
                <div class="music-playlist">
                    <button class="close-playlist-btn">‚úï</button>
                    <div class="playlist-header">
                        <span class="music-icon">üéµ</span>
                        <h3>Êúà„Åå„Åç„Çå„ÅÑ„Åß„Åô„Å≠</h3>
                    </div>
                    <audio id="audioPlayer" controls></audio>
                    <div class="playlist-container">
                        <div class="song-item" data-src="To The Moon - hooligan..mp3">
                            <span class="song-number">1</span>
                            <span class="song-name">To The Moon - hooligan.</span>
                        </div>
                        <div class="song-item" data-src="I'm Gonna Love You - D.O..mp3">
                            <span class="song-number">2</span>
                            <span class="song-name">I'm Gonna Love You - D.O., Wonstein</span>
                        </div>
                        <div class="song-item" data-src="Yours - Jimmy Brown.mp3">
                            <span class="song-number">3</span>
                            <span class="song-name">Yours - Jimmy Brown</span>
                        </div>
                        <div class="song-item" data-src="Yours - Raiden.mp3">
                            <span class="song-number">4</span>
                            <span class="song-name">Yours - Raiden, CHANYEOL</span>
                        </div>
                        <div class="song-item" data-src="ONLY - LeeHi.mp3">
                            <span class="song-number">5</span>
                            <span class="song-name">ONLY - LeeHi</span>
                        </div>
                        <div class="song-item" data-src="Me After You - Paul Kim.mp3">
                            <span class="song-number">6</span>
                            <span class="song-name">Me After You - Paul Kim</span>
                        </div>
                        <div class="song-item" data-src="B612 - BUZZ.mp3">
                            <span class="song-number">7</span>
                            <span class="song-name">B612 - BUZZ</span>
                        </div>
                        <div class="song-item" data-src="Superstar - Mido and Falasol.mp3">
                            <span class="song-number">8</span>
                            <span class="song-name">Superstar - Mido and Falasol</span>
                        </div>
                        <div class="song-item" data-src="T·ª´ng Ng√†y Y√™u Em - buitruonglinh.mp3">
                            <span class="song-number">9</span>
                            <span class="song-name">T·ª´ng Ng√†y Y√™u Em - buitruonglinh</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="envelope-body">
                <div class="heart"></div>
                <div class="envelope-text">For You</div>
            </div>
        </div>
    </div>
    <script>
        const envelope = document.querySelector('.envelope');
        const closeBtn = document.querySelector('.close-btn');
        const letterImage = document.getElementById('letterImage');
        const musicPlaylist = document.querySelector('.music-playlist');
        const closePlaylistBtn = document.querySelector('.close-playlist-btn');
        const audioPlayer = document.getElementById('audioPlayer');
        const songItems = document.querySelectorAll('.song-item');
        
        envelope.addEventListener('click', function(e) {
            // Kh√¥ng m·ªü n·∫øu click v√†o n√∫t close
            if (!e.target.classList.contains('close-btn')) {
                this.classList.add('opened');
            }
        });
        
        closeBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            envelope.classList.remove('opened');
            musicPlaylist.classList.remove('show');
            // T·∫Øt nh·∫°c khi ƒë√≥ng envelope
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            // X√≥a active t·ª´ t·∫•t c·∫£ c√°c b√†i
            songItems.forEach(song => song.classList.remove('active'));
        });

        // Click v√†o h√¨nh ·∫£nh ƒë·ªÉ m·ªü playlist
        letterImage.addEventListener('click', function(e) {
            e.stopPropagation();
            musicPlaylist.classList.add('show');
        });

        // ƒê√≥ng playlist
        closePlaylistBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            musicPlaylist.classList.remove('show');
            // T·∫Øt nh·∫°c khi ƒë√≥ng playlist
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            // X√≥a active t·ª´ t·∫•t c·∫£ c√°c b√†i
            songItems.forEach(song => song.classList.remove('active'));
        });

        // Click v√†o b√†i h√°t ƒë·ªÉ ph√°t
        songItems.forEach((item, index) => {
            item.addEventListener('click', function(e) {
                e.stopPropagation();
                
                // X√≥a active t·ª´ t·∫•t c·∫£ c√°c b√†i
                songItems.forEach(song => song.classList.remove('active'));
                
                // Th√™m active cho b√†i ƒëang ch·ªçn
                this.classList.add('active');
                
                // Ph√°t nh·∫°c
                const songSrc = this.getAttribute('data-src');
                audioPlayer.src = songSrc;
                audioPlayer.play();
            });
        });

        // T·ª± ƒë·ªông ph√°t b√†i ti·∫øp theo
        audioPlayer.addEventListener('ended', function() {
            const currentActive = document.querySelector('.song-item.active');
            if (currentActive) {
                const nextSong = currentActive.nextElementSibling;
                if (nextSong && nextSong.classList.contains('song-item')) {
                    nextSong.click();
                } else {
                    // Quay l·∫°i b√†i ƒë·∫ßu ti√™n
                    songItems[0].click();
                }
            }
        });
    </script>
</body>
</html>
